# Logfile created on 2011-10-11 21:07:01 +0300 by logger.rb/25413
D, [2011-10-11T21:20:31.739580 #6219] DEBUG -- :   [1m[36mSQL (12.4ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:20:31.740316 #6219] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:20:31.740788 #6219] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:21:02.534801 #6729] DEBUG -- :   [1m[36mSQL (27.9ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:21:02.535635 #6729] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:21:02.536188 #6729] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:24:36.573618 #8212] DEBUG -- :   [1m[36mSQL (0.9ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:24:36.574123 #8212] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:24:36.574320 #8212] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:25:23.541125 #8742] DEBUG -- :   [1m[36mSQL (0.9ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:25:23.541615 #8742] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:25:23.541813 #8742] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:25:28.254217 #9043] DEBUG -- :   [1m[36mSQL (0.9ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:25:28.254727 #9043] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:25:28.254987 #9043] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:28:21.886693 #9907] DEBUG -- :   [1m[36mSQL (85.3ms)[0m  [1mshow databases[0m
D, [2011-10-11T21:29:10.473230 #10701] DEBUG -- :   [1m[36mSQL (0.9ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:29:10.473723 #10701] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:29:10.473884 #10701] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:30:29.292446 #11433] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:30:29.292698 #11433] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:30:29.292811 #11433] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:30:29.467126 #11433] DEBUG -- :   [1m[35mSQL (173.9ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:30:29.648614 #11433] DEBUG -- :   [1m[36mSQL (181.1ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:30:29.658487 #11433] DEBUG -- :   [1m[35mSQL (9.6ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:30:29.666738 #11433] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:30:29.669831 #11433] DEBUG -- :   [1m[35mSQL (2.8ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:30:29.670946 #11433] DEBUG -- :   [1m[36mSQL (0.8ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:30:29.681569 #11433] DEBUG -- :   [1m[35mSQL (10.3ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:30:29.682238 #11433] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:30:29.682646 #11433] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:30:29.689019 #11433] DEBUG -- :   [1m[36mSQL (6.2ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:30:29.701939 #11433] DEBUG -- :   [1m[35mSQL (12.5ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:30:29.710327 #11433] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:30:29.715419 #11433] DEBUG -- :   [1m[35mSQL (4.8ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:30:29.718794 #11433] DEBUG -- :   [1m[36mSQL (2.1ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
D, [2011-10-11T21:30:29.719652 #11433] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW CREATE TABLE `profiles`
D, [2011-10-11T21:30:29.720352 #11433] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE TABLE `users`[0m
D, [2011-10-11T21:30:29.723109 #11433] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW FULL TABLES WHERE Table_type = 'VIEW'
D, [2011-10-11T21:30:29.725376 #11433] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mSHOW FIELDS FROM active_users[0m
D, [2011-10-11T21:30:29.726851 #11433] DEBUG -- :   [1m[35mSQL (1.0ms)[0m  SHOW FIELDS FROM pending_users
D, [2011-10-11T21:30:29.727677 #11433] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE VIEW active_users[0m
D, [2011-10-11T21:30:29.728425 #11433] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE VIEW pending_users
D, [2011-10-11T21:30:29.736146 #11433] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mSHOW TRIGGERS[0m
D, [2011-10-11T21:30:29.738813 #11433] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SELECT DATABASE() as db
D, [2011-10-11T21:30:29.746284 #11433] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:30:29.747356 #11433] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW CREATE PROCEDURE fix_user_state
D, [2011-10-11T21:30:29.748707 #11433] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mSHOW CREATE FUNCTION hello[0m
D, [2011-10-11T21:30:51.994385 #11815] DEBUG -- :   [1m[36mSQL (20.8ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:30:51.995230 #11815] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:30:51.995674 #11815] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:30:52.050868 #11815] DEBUG -- :   [1m[35mSQL (54.9ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:30:52.077513 #11815] DEBUG -- :   [1m[36mSQL (26.3ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:30:52.085254 #11815] DEBUG -- :   [1m[35mSQL (7.4ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:30:52.093343 #11815] DEBUG -- :   [1m[36mSQL (7.7ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:30:52.094098 #11815] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:30:52.094591 #11815] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:30:52.099823 #11815] DEBUG -- :   [1m[35mSQL (4.9ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:30:52.100694 #11815] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:30:52.101243 #11815] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:30:52.112780 #11815] DEBUG -- :   [1m[36mSQL (11.2ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:30:52.121469 #11815] DEBUG -- :   [1m[35mSQL (8.3ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:30:52.122544 #11815] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:30:52.123400 #11815] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:30:52.125392 #11815] DEBUG -- :   [1m[36mSQL (0.7ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
D, [2011-10-11T21:30:52.126291 #11815] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE TABLE `profiles`
D, [2011-10-11T21:30:52.127092 #11815] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW CREATE TABLE `users`[0m
D, [2011-10-11T21:30:52.130010 #11815] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW FULL TABLES WHERE Table_type = 'VIEW'
D, [2011-10-11T21:30:52.131481 #11815] DEBUG -- :   [1m[36mSQL (1.1ms)[0m  [1mSHOW FIELDS FROM active_users[0m
D, [2011-10-11T21:30:52.132829 #11815] DEBUG -- :   [1m[35mSQL (1.0ms)[0m  SHOW FIELDS FROM pending_users
D, [2011-10-11T21:30:52.133643 #11815] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE VIEW active_users[0m
D, [2011-10-11T21:30:52.134363 #11815] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE VIEW pending_users
D, [2011-10-11T21:30:52.142296 #11815] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mSHOW TRIGGERS[0m
D, [2011-10-11T21:30:52.147343 #11815] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SELECT DATABASE() as db
D, [2011-10-11T21:30:52.152255 #11815] DEBUG -- :   [1m[36mSQL (4.4ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:30:52.152878 #11815] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW CREATE PROCEDURE fix_user_state
D, [2011-10-11T21:30:52.153270 #11815] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE FUNCTION hello[0m
D, [2011-10-11T21:30:52.156196 #11815] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'
D, [2011-10-11T21:30:52.156493 #11815] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE TABLE `profiles`[0m
D, [2011-10-11T21:30:52.156656 #11815] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE TABLE `users`
D, [2011-10-11T21:30:52.156912 #11815] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
D, [2011-10-11T21:30:52.157389 #11815] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW FIELDS FROM active_users
D, [2011-10-11T21:30:52.157822 #11815] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mSHOW FIELDS FROM pending_users[0m
D, [2011-10-11T21:30:52.158053 #11815] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE VIEW active_users
D, [2011-10-11T21:30:52.158265 #11815] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE VIEW pending_users[0m
D, [2011-10-11T21:30:52.158735 #11815] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:30:52.158902 #11815] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
D, [2011-10-11T21:30:52.160249 #11815] DEBUG -- :   [1m[35mSQL (1.2ms)[0m  SELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'
D, [2011-10-11T21:30:52.160419 #11815] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE PROCEDURE fix_user_state[0m
D, [2011-10-11T21:30:52.160568 #11815] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  SHOW CREATE FUNCTION hello
D, [2011-10-11T21:39:12.539350 #14826] DEBUG -- :   [1m[36mSQL (89.9ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:39:12.540291 #14826] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:39:12.540775 #14826] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:39:12.586484 #14826] DEBUG -- :   [1m[35mSQL (45.3ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:39:12.627106 #14826] DEBUG -- :   [1m[36mSQL (40.1ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:39:12.634982 #14826] DEBUG -- :   [1m[35mSQL (7.5ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:39:12.642567 #14826] DEBUG -- :   [1m[36mSQL (7.3ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:39:12.643244 #14826] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:39:12.643710 #14826] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:39:12.648855 #14826] DEBUG -- :   [1m[35mSQL (4.9ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:39:12.649571 #14826] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:39:12.650007 #14826] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:39:12.655933 #14826] DEBUG -- :   [1m[36mSQL (5.5ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:39:12.666049 #14826] DEBUG -- :   [1m[35mSQL (9.7ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:39:12.666908 #14826] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:39:12.667602 #14826] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:39:12.669615 #14826] DEBUG -- :   [1m[36mSQL (0.7ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
D, [2011-10-11T21:39:12.670542 #14826] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE TABLE `profiles`
D, [2011-10-11T21:39:12.671334 #14826] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW CREATE TABLE `users`[0m
D, [2011-10-11T21:39:12.674334 #14826] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW FULL TABLES WHERE Table_type = 'VIEW'
D, [2011-10-11T21:39:12.675894 #14826] DEBUG -- :   [1m[36mSQL (1.1ms)[0m  [1mSHOW FIELDS FROM active_users[0m
D, [2011-10-11T21:39:12.677230 #14826] DEBUG -- :   [1m[35mSQL (0.9ms)[0m  SHOW FIELDS FROM pending_users
D, [2011-10-11T21:39:12.678218 #14826] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW CREATE VIEW active_users[0m
D, [2011-10-11T21:39:12.679327 #14826] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW CREATE VIEW pending_users
D, [2011-10-11T21:39:12.690639 #14826] DEBUG -- :   [1m[36mSQL (1.9ms)[0m  [1mSHOW TRIGGERS[0m
D, [2011-10-11T21:39:12.693297 #14826] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SELECT DATABASE() as db
D, [2011-10-11T21:39:12.700426 #14826] DEBUG -- :   [1m[36mSQL (6.4ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:39:12.701752 #14826] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW CREATE PROCEDURE fix_user_state
D, [2011-10-11T21:39:12.702934 #14826] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mSHOW CREATE FUNCTION hello[0m
D, [2011-10-11T21:39:12.706374 #14826] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'
D, [2011-10-11T21:39:12.706627 #14826] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE TABLE `profiles`[0m
D, [2011-10-11T21:39:12.706781 #14826] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE TABLE `users`
D, [2011-10-11T21:39:12.707072 #14826] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
D, [2011-10-11T21:39:12.707578 #14826] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW FIELDS FROM active_users
D, [2011-10-11T21:39:12.707999 #14826] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mSHOW FIELDS FROM pending_users[0m
D, [2011-10-11T21:39:12.708217 #14826] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE VIEW active_users
D, [2011-10-11T21:39:12.708411 #14826] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE VIEW pending_users[0m
D, [2011-10-11T21:39:12.708876 #14826] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:39:12.709055 #14826] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
D, [2011-10-11T21:39:12.710567 #14826] DEBUG -- :   [1m[35mSQL (1.4ms)[0m  SELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'
D, [2011-10-11T21:39:12.710848 #14826] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE PROCEDURE fix_user_state[0m
D, [2011-10-11T21:39:12.711039 #14826] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE FUNCTION hello
D, [2011-10-11T21:39:12.740422 #14826] DEBUG -- :   [1m[36mSQL (14.6ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:39:12.741584 #14826] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:39:12.742259 #14826] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:39:25.907998 #15182] DEBUG -- :   [1m[36mSQL (0.9ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:39:25.908494 #15182] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:39:25.908641 #15182] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:39:25.987654 #15182] DEBUG -- :   [1m[35mSQL (78.7ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:39:26.013278 #15182] DEBUG -- :   [1m[36mSQL (25.3ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:39:26.020422 #15182] DEBUG -- :   [1m[35mSQL (6.9ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:39:26.027892 #15182] DEBUG -- :   [1m[36mSQL (7.3ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:39:26.028460 #15182] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:39:26.028797 #15182] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:39:26.033668 #15182] DEBUG -- :   [1m[35mSQL (4.7ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:39:26.034198 #15182] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:39:26.034515 #15182] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:39:26.040291 #15182] DEBUG -- :   [1m[36mSQL (5.6ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:39:26.048822 #15182] DEBUG -- :   [1m[35mSQL (8.3ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:39:26.049445 #15182] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:39:26.049960 #15182] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:39:26.051372 #15182] DEBUG -- :   [1m[36mSQL (0.7ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
D, [2011-10-11T21:39:26.052021 #15182] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE TABLE `profiles`
D, [2011-10-11T21:39:26.052640 #15182] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW CREATE TABLE `users`[0m
D, [2011-10-11T21:39:26.054398 #15182] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW FULL TABLES WHERE Table_type = 'VIEW'
D, [2011-10-11T21:39:26.055652 #15182] DEBUG -- :   [1m[36mSQL (1.0ms)[0m  [1mSHOW FIELDS FROM active_users[0m
D, [2011-10-11T21:39:26.056856 #15182] DEBUG -- :   [1m[35mSQL (0.9ms)[0m  SHOW FIELDS FROM pending_users
D, [2011-10-11T21:39:26.057520 #15182] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE VIEW active_users[0m
D, [2011-10-11T21:39:26.058190 #15182] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE VIEW pending_users
D, [2011-10-11T21:39:26.063215 #15182] DEBUG -- :   [1m[36mSQL (1.2ms)[0m  [1mSHOW TRIGGERS[0m
D, [2011-10-11T21:39:26.065466 #15182] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SELECT DATABASE() as db
D, [2011-10-11T21:39:26.068623 #15182] DEBUG -- :   [1m[36mSQL (2.6ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:39:26.069573 #15182] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW CREATE PROCEDURE fix_user_state
D, [2011-10-11T21:39:26.070444 #15182] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE FUNCTION hello[0m
D, [2011-10-11T21:39:26.073611 #15182] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'
D, [2011-10-11T21:39:26.074392 #15182] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mSHOW CREATE TABLE `profiles`[0m
D, [2011-10-11T21:39:26.074950 #15182] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE TABLE `users`
D, [2011-10-11T21:39:26.076009 #15182] DEBUG -- :   [1m[36mSQL (0.7ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
D, [2011-10-11T21:39:26.077632 #15182] DEBUG -- :   [1m[35mSQL (1.2ms)[0m  SHOW FIELDS FROM active_users
D, [2011-10-11T21:39:26.079101 #15182] DEBUG -- :   [1m[36mSQL (1.0ms)[0m  [1mSHOW FIELDS FROM pending_users[0m
D, [2011-10-11T21:39:26.080068 #15182] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW CREATE VIEW active_users
D, [2011-10-11T21:39:26.080901 #15182] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW CREATE VIEW pending_users[0m
D, [2011-10-11T21:39:26.082632 #15182] DEBUG -- :   [1m[35mSQL (1.3ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:39:26.083323 #15182] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSELECT DATABASE() as db[0m
D, [2011-10-11T21:39:26.088398 #15182] DEBUG -- :   [1m[35mSQL (4.7ms)[0m  SELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'
D, [2011-10-11T21:39:26.089146 #15182] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mSHOW CREATE PROCEDURE fix_user_state[0m
D, [2011-10-11T21:39:26.089741 #15182] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE FUNCTION hello
D, [2011-10-11T21:39:26.130186 #15182] DEBUG -- :   [1m[36mSQL (14.8ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:39:26.130528 #15182] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:39:26.130665 #15182] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:39:26.161058 #15182] DEBUG -- :   [1m[35mSQL (30.0ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:39:26.186732 #15182] DEBUG -- :   [1m[36mSQL (25.2ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:39:26.195514 #15182] DEBUG -- :   [1m[35mSQL (8.3ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:39:26.203033 #15182] DEBUG -- :   [1m[36mSQL (7.4ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:39:26.203565 #15182] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:39:26.203859 #15182] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:39:26.208714 #15182] DEBUG -- :   [1m[35mSQL (4.7ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:39:26.209279 #15182] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:39:26.209565 #15182] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:39:26.243810 #15182] DEBUG -- :   [1m[36mSQL (34.0ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:39:26.252918 #15182] DEBUG -- :   [1m[35mSQL (8.9ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:39:26.253542 #15182] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:39:26.254054 #15182] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:39:26.254658 #15182] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mshow tables[0m
D, [2011-10-11T21:39:44.017264 #15564] DEBUG -- :   [1m[36mSQL (18.9ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:39:44.018127 #15564] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:39:44.018585 #15564] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:39:44.058403 #15564] DEBUG -- :   [1m[35mSQL (39.4ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:39:44.089240 #15564] DEBUG -- :   [1m[36mSQL (30.3ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:39:44.097751 #15564] DEBUG -- :   [1m[35mSQL (8.1ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:39:44.105450 #15564] DEBUG -- :   [1m[36mSQL (7.4ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:39:44.106313 #15564] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:39:44.106940 #15564] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:39:44.112426 #15564] DEBUG -- :   [1m[35mSQL (5.1ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:39:44.113191 #15564] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:39:44.113707 #15564] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:39:44.120649 #15564] DEBUG -- :   [1m[36mSQL (6.5ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:39:44.130176 #15564] DEBUG -- :   [1m[35mSQL (9.1ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:39:44.131047 #15564] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:39:44.131749 #15564] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:39:44.133671 #15564] DEBUG -- :   [1m[36mSQL (0.7ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
D, [2011-10-11T21:39:44.134596 #15564] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE TABLE `profiles`
D, [2011-10-11T21:39:44.135386 #15564] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW CREATE TABLE `users`[0m
D, [2011-10-11T21:39:44.138228 #15564] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW FULL TABLES WHERE Table_type = 'VIEW'
D, [2011-10-11T21:39:44.139768 #15564] DEBUG -- :   [1m[36mSQL (1.0ms)[0m  [1mSHOW FIELDS FROM active_users[0m
D, [2011-10-11T21:39:44.141271 #15564] DEBUG -- :   [1m[35mSQL (1.0ms)[0m  SHOW FIELDS FROM pending_users
D, [2011-10-11T21:39:44.142104 #15564] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE VIEW active_users[0m
D, [2011-10-11T21:39:44.142895 #15564] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE VIEW pending_users
D, [2011-10-11T21:39:44.148267 #15564] DEBUG -- :   [1m[36mSQL (1.4ms)[0m  [1mSHOW TRIGGERS[0m
D, [2011-10-11T21:39:44.150958 #15564] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SELECT DATABASE() as db
D, [2011-10-11T21:39:44.155857 #15564] DEBUG -- :   [1m[36mSQL (4.3ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:39:44.156529 #15564] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW CREATE PROCEDURE fix_user_state
D, [2011-10-11T21:39:44.157196 #15564] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mSHOW CREATE FUNCTION hello[0m
D, [2011-10-11T21:39:44.159482 #15564] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'
D, [2011-10-11T21:39:44.159757 #15564] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE TABLE `profiles`[0m
D, [2011-10-11T21:39:44.160113 #15564] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE TABLE `users`
D, [2011-10-11T21:39:44.160564 #15564] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
D, [2011-10-11T21:39:44.161321 #15564] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW FIELDS FROM active_users
D, [2011-10-11T21:39:44.161849 #15564] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mSHOW FIELDS FROM pending_users[0m
D, [2011-10-11T21:39:44.163464 #15564] DEBUG -- :   [1m[35mSQL (1.3ms)[0m  SHOW CREATE VIEW active_users
D, [2011-10-11T21:39:44.164046 #15564] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mSHOW CREATE VIEW pending_users[0m
D, [2011-10-11T21:39:44.164950 #15564] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:39:44.165527 #15564] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSELECT DATABASE() as db[0m
D, [2011-10-11T21:39:44.168099 #15564] DEBUG -- :   [1m[35mSQL (2.2ms)[0m  SELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'
D, [2011-10-11T21:39:44.168339 #15564] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE PROCEDURE fix_user_state[0m
D, [2011-10-11T21:39:44.168529 #15564] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE FUNCTION hello
D, [2011-10-11T21:39:44.204205 #15564] DEBUG -- :   [1m[36mSQL (21.3ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:39:44.204940 #15564] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:39:44.205245 #15564] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:39:44.237862 #15564] DEBUG -- :   [1m[35mSQL (32.1ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:39:44.264633 #15564] DEBUG -- :   [1m[36mSQL (26.3ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:39:44.273219 #15564] DEBUG -- :   [1m[35mSQL (8.1ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:39:44.281275 #15564] DEBUG -- :   [1m[36mSQL (7.7ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:39:44.282059 #15564] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:39:44.286313 #15564] DEBUG -- :   [1m[36mSQL (3.8ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:39:44.373760 #15564] DEBUG -- :   [1m[35mSQL (87.0ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:39:44.374371 #15564] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:39:44.374633 #15564] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:39:44.380463 #15564] DEBUG -- :   [1m[36mSQL (5.7ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:39:44.389686 #15564] DEBUG -- :   [1m[35mSQL (9.1ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:39:44.390242 #15564] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:39:44.390708 #15564] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:39:44.391246 #15564] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mshow tables[0m
D, [2011-10-11T21:40:09.760993 #15977] DEBUG -- :   [1m[36mSQL (47.3ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:40:09.761763 #15977] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:40:09.761920 #15977] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:40:09.806181 #15977] DEBUG -- :   [1m[35mSQL (44.0ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:40:09.831891 #15977] DEBUG -- :   [1m[36mSQL (25.2ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:40:09.839395 #15977] DEBUG -- :   [1m[35mSQL (7.1ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:40:09.847338 #15977] DEBUG -- :   [1m[36mSQL (7.5ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:40:09.848392 #15977] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:40:09.849138 #15977] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:40:09.855043 #15977] DEBUG -- :   [1m[35mSQL (5.5ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:40:09.855973 #15977] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:40:09.856546 #15977] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:40:09.862708 #15977] DEBUG -- :   [1m[36mSQL (5.8ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:40:09.878842 #15977] DEBUG -- :   [1m[35mSQL (15.8ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:40:09.879516 #15977] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:40:09.879998 #15977] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:40:09.881123 #15977] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
D, [2011-10-11T21:40:09.881966 #15977] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE TABLE `profiles`
D, [2011-10-11T21:40:09.882495 #15977] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE TABLE `users`[0m
D, [2011-10-11T21:40:09.883739 #15977] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW FULL TABLES WHERE Table_type = 'VIEW'
D, [2011-10-11T21:40:09.884889 #15977] DEBUG -- :   [1m[36mSQL (1.0ms)[0m  [1mSHOW FIELDS FROM active_users[0m
D, [2011-10-11T21:40:09.885904 #15977] DEBUG -- :   [1m[35mSQL (0.9ms)[0m  SHOW FIELDS FROM pending_users
D, [2011-10-11T21:40:09.886316 #15977] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE VIEW active_users[0m
D, [2011-10-11T21:40:09.886677 #15977] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE VIEW pending_users
D, [2011-10-11T21:40:09.889496 #15977] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW TRIGGERS[0m
D, [2011-10-11T21:40:09.890576 #15977] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SELECT DATABASE() as db
D, [2011-10-11T21:40:09.892654 #15977] DEBUG -- :   [1m[36mSQL (1.9ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:40:09.893041 #15977] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE PROCEDURE fix_user_state
D, [2011-10-11T21:40:09.893444 #15977] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE FUNCTION hello[0m
D, [2011-10-11T21:40:09.895012 #15977] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'
D, [2011-10-11T21:40:09.895378 #15977] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE TABLE `profiles`[0m
D, [2011-10-11T21:40:09.895647 #15977] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE TABLE `users`
D, [2011-10-11T21:40:09.896051 #15977] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
D, [2011-10-11T21:40:09.896598 #15977] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW FIELDS FROM active_users
D, [2011-10-11T21:40:09.897097 #15977] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW FIELDS FROM pending_users[0m
D, [2011-10-11T21:40:09.897395 #15977] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE VIEW active_users
D, [2011-10-11T21:40:09.897673 #15977] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE VIEW pending_users[0m
D, [2011-10-11T21:40:09.898233 #15977] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:40:09.898424 #15977] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
D, [2011-10-11T21:40:09.900350 #15977] DEBUG -- :   [1m[35mSQL (1.8ms)[0m  SELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'
D, [2011-10-11T21:40:09.900578 #15977] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE PROCEDURE fix_user_state[0m
D, [2011-10-11T21:40:09.900765 #15977] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE FUNCTION hello
D, [2011-10-11T21:40:09.933793 #15977] DEBUG -- :   [1m[36mSQL (14.4ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:40:09.934314 #15977] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:40:09.934528 #15977] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:40:09.967199 #15977] DEBUG -- :   [1m[35mSQL (32.2ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:40:09.993442 #15977] DEBUG -- :   [1m[36mSQL (25.7ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:40:10.001390 #15977] DEBUG -- :   [1m[35mSQL (7.4ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:40:10.009549 #15977] DEBUG -- :   [1m[36mSQL (7.8ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:40:10.010351 #15977] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:40:10.010852 #15977] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:40:10.015828 #15977] DEBUG -- :   [1m[35mSQL (4.6ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:40:10.016537 #15977] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:40:10.017018 #15977] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:40:10.023328 #15977] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:40:10.032869 #15977] DEBUG -- :   [1m[35mSQL (9.1ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:40:10.033712 #15977] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:40:10.034409 #15977] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:40:10.035283 #15977] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW TABLES[0m
D, [2011-10-11T21:40:10.037029 #15977] DEBUG -- :   [1m[35mSQL (1.3ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:40:30.469115 #16359] DEBUG -- :   [1m[36mSQL (17.5ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:40:30.469722 #16359] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:40:30.470111 #16359] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:40:30.518635 #16359] DEBUG -- :   [1m[35mSQL (48.1ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:40:30.635643 #16359] DEBUG -- :   [1m[36mSQL (116.5ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:40:30.644280 #16359] DEBUG -- :   [1m[35mSQL (8.4ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:40:30.652301 #16359] DEBUG -- :   [1m[36mSQL (7.8ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:40:30.652925 #16359] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:40:30.653326 #16359] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:40:30.659196 #16359] DEBUG -- :   [1m[35mSQL (5.5ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:40:30.660087 #16359] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:40:30.660596 #16359] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:40:30.666931 #16359] DEBUG -- :   [1m[36mSQL (6.1ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:40:30.676483 #16359] DEBUG -- :   [1m[35mSQL (9.1ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:40:30.677588 #16359] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:40:30.678428 #16359] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:40:30.679992 #16359] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
D, [2011-10-11T21:40:30.680517 #16359] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE TABLE `profiles`
D, [2011-10-11T21:40:30.680766 #16359] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE TABLE `users`[0m
D, [2011-10-11T21:40:30.681820 #16359] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW FULL TABLES WHERE Table_type = 'VIEW'
D, [2011-10-11T21:40:30.682941 #16359] DEBUG -- :   [1m[36mSQL (0.9ms)[0m  [1mSHOW FIELDS FROM active_users[0m
D, [2011-10-11T21:40:30.683950 #16359] DEBUG -- :   [1m[35mSQL (0.9ms)[0m  SHOW FIELDS FROM pending_users
D, [2011-10-11T21:40:30.684448 #16359] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE VIEW active_users[0m
D, [2011-10-11T21:40:30.684928 #16359] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE VIEW pending_users
D, [2011-10-11T21:40:30.687435 #16359] DEBUG -- :   [1m[36mSQL (0.8ms)[0m  [1mSHOW TRIGGERS[0m
D, [2011-10-11T21:40:30.689438 #16359] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SELECT DATABASE() as db
D, [2011-10-11T21:40:30.692704 #16359] DEBUG -- :   [1m[36mSQL (2.9ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:40:30.693301 #16359] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW CREATE PROCEDURE fix_user_state
D, [2011-10-11T21:40:30.693825 #16359] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE FUNCTION hello[0m
D, [2011-10-11T21:40:30.695956 #16359] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'
D, [2011-10-11T21:40:30.696255 #16359] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE TABLE `profiles`[0m
D, [2011-10-11T21:40:30.696500 #16359] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE TABLE `users`
D, [2011-10-11T21:40:30.696867 #16359] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
D, [2011-10-11T21:40:30.697396 #16359] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW FIELDS FROM active_users
D, [2011-10-11T21:40:30.698518 #16359] DEBUG -- :   [1m[36mSQL (0.9ms)[0m  [1mSHOW FIELDS FROM pending_users[0m
D, [2011-10-11T21:40:30.698856 #16359] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE VIEW active_users
D, [2011-10-11T21:40:30.699225 #16359] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE VIEW pending_users[0m
D, [2011-10-11T21:40:30.699801 #16359] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:40:30.700073 #16359] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
D, [2011-10-11T21:40:30.701537 #16359] DEBUG -- :   [1m[35mSQL (1.3ms)[0m  SELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'
D, [2011-10-11T21:40:30.701831 #16359] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE PROCEDURE fix_user_state[0m
D, [2011-10-11T21:40:30.702086 #16359] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE FUNCTION hello
D, [2011-10-11T21:40:30.741832 #16359] DEBUG -- :   [1m[36mSQL (20.2ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:40:30.742432 #16359] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:40:30.742740 #16359] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:40:30.886706 #16359] DEBUG -- :   [1m[35mSQL (143.5ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:40:30.912874 #16359] DEBUG -- :   [1m[36mSQL (25.8ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:40:30.920452 #16359] DEBUG -- :   [1m[35mSQL (7.3ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:40:30.928254 #16359] DEBUG -- :   [1m[36mSQL (7.6ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:40:30.928896 #16359] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:40:30.929339 #16359] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:40:30.934335 #16359] DEBUG -- :   [1m[35mSQL (4.7ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:40:30.935114 #16359] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:40:30.935624 #16359] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:40:30.946173 #16359] DEBUG -- :   [1m[36mSQL (10.2ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:40:30.955560 #16359] DEBUG -- :   [1m[35mSQL (9.0ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:40:30.956375 #16359] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:40:30.957025 #16359] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:40:30.957773 #16359] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW TABLES[0m
D, [2011-10-11T21:40:30.959552 #16359] DEBUG -- :   [1m[35mSQL (1.4ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:40:43.207315 #16690] DEBUG -- :   [1m[36mSQL (51.6ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:40:43.207768 #16690] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:40:43.207996 #16690] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:40:43.260680 #16690] DEBUG -- :   [1m[35mSQL (52.4ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:40:43.285326 #16690] DEBUG -- :   [1m[36mSQL (24.2ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:40:43.293393 #16690] DEBUG -- :   [1m[35mSQL (7.7ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:40:43.301391 #16690] DEBUG -- :   [1m[36mSQL (7.7ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:40:43.302131 #16690] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:40:43.302610 #16690] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:40:43.307915 #16690] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:40:43.308620 #16690] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:40:43.309083 #16690] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:40:43.314625 #16690] DEBUG -- :   [1m[36mSQL (5.3ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:40:43.324236 #16690] DEBUG -- :   [1m[35mSQL (9.3ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:40:43.324955 #16690] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:40:43.325604 #16690] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:40:43.327435 #16690] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
D, [2011-10-11T21:40:43.328265 #16690] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE TABLE `profiles`
D, [2011-10-11T21:40:43.329076 #16690] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW CREATE TABLE `users`[0m
D, [2011-10-11T21:40:43.331716 #16690] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW FULL TABLES WHERE Table_type = 'VIEW'
D, [2011-10-11T21:40:43.333296 #16690] DEBUG -- :   [1m[36mSQL (1.2ms)[0m  [1mSHOW FIELDS FROM active_users[0m
D, [2011-10-11T21:40:43.334585 #16690] DEBUG -- :   [1m[35mSQL (1.0ms)[0m  SHOW FIELDS FROM pending_users
D, [2011-10-11T21:40:43.335335 #16690] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE VIEW active_users[0m
D, [2011-10-11T21:40:43.336048 #16690] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE VIEW pending_users
D, [2011-10-11T21:40:43.343532 #16690] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mSHOW TRIGGERS[0m
D, [2011-10-11T21:40:43.345933 #16690] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SELECT DATABASE() as db
D, [2011-10-11T21:40:43.350165 #16690] DEBUG -- :   [1m[36mSQL (3.9ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:40:43.351053 #16690] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW CREATE PROCEDURE fix_user_state
D, [2011-10-11T21:40:43.351845 #16690] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE FUNCTION hello[0m
D, [2011-10-11T21:40:43.353933 #16690] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'
D, [2011-10-11T21:40:43.354461 #16690] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE TABLE `profiles`[0m
D, [2011-10-11T21:40:43.354632 #16690] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE TABLE `users`
D, [2011-10-11T21:40:43.355472 #16690] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
D, [2011-10-11T21:40:43.356423 #16690] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW FIELDS FROM active_users
D, [2011-10-11T21:40:43.357257 #16690] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW FIELDS FROM pending_users[0m
D, [2011-10-11T21:40:43.357858 #16690] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW CREATE VIEW active_users
D, [2011-10-11T21:40:43.358380 #16690] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE VIEW pending_users[0m
D, [2011-10-11T21:40:43.359275 #16690] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:40:43.359819 #16690] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSELECT DATABASE() as db[0m
D, [2011-10-11T21:40:43.361692 #16690] DEBUG -- :   [1m[35mSQL (1.5ms)[0m  SELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'
D, [2011-10-11T21:40:43.362308 #16690] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE PROCEDURE fix_user_state[0m
D, [2011-10-11T21:40:43.362963 #16690] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE FUNCTION hello
D, [2011-10-11T21:40:43.403842 #16690] DEBUG -- :   [1m[36mSQL (18.4ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:40:43.404469 #16690] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:40:43.404885 #16690] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:40:43.443335 #16690] DEBUG -- :   [1m[35mSQL (37.7ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:40:43.476710 #16690] DEBUG -- :   [1m[36mSQL (33.0ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:40:43.484425 #16690] DEBUG -- :   [1m[35mSQL (7.5ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:40:43.492560 #16690] DEBUG -- :   [1m[36mSQL (7.9ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:40:43.493185 #16690] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:40:43.493555 #16690] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:40:43.499162 #16690] DEBUG -- :   [1m[35mSQL (5.3ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:40:43.499908 #16690] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:40:43.500373 #16690] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:40:43.506162 #16690] DEBUG -- :   [1m[36mSQL (5.4ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:40:43.514966 #16690] DEBUG -- :   [1m[35mSQL (8.5ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:40:43.515768 #16690] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:40:43.516409 #16690] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:40:43.517191 #16690] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW TABLES[0m
D, [2011-10-11T21:40:43.518790 #16690] DEBUG -- :   [1m[35mSQL (1.2ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:40:43.519630 #16690] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW FUNCTIONS[0m
D, [2011-10-11T21:40:43.519771 #16690] DEBUG -- : Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FUNCTIONS' at line 1: SHOW FUNCTIONS
D, [2011-10-11T21:43:51.604301 #18047] DEBUG -- :   [1m[36mSQL (58.8ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:43:51.606737 #18047] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:43:51.607199 #18047] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:43:51.686670 #18047] DEBUG -- :   [1m[35mSQL (79.0ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:43:51.717478 #18047] DEBUG -- :   [1m[36mSQL (30.2ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:43:51.726609 #18047] DEBUG -- :   [1m[35mSQL (8.6ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:43:51.735170 #18047] DEBUG -- :   [1m[36mSQL (8.1ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:43:51.736199 #18047] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:43:51.736884 #18047] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:43:51.743352 #18047] DEBUG -- :   [1m[35mSQL (6.0ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:43:51.744213 #18047] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:43:51.744743 #18047] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:43:51.757047 #18047] DEBUG -- :   [1m[36mSQL (12.0ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:43:51.766685 #18047] DEBUG -- :   [1m[35mSQL (9.4ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:43:51.767393 #18047] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:43:51.767982 #18047] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:43:51.769559 #18047] DEBUG -- :   [1m[36mSQL (0.7ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
D, [2011-10-11T21:43:51.770280 #18047] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE TABLE `profiles`
D, [2011-10-11T21:43:51.770940 #18047] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW CREATE TABLE `users`[0m
D, [2011-10-11T21:43:51.773138 #18047] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW FULL TABLES WHERE Table_type = 'VIEW'
D, [2011-10-11T21:43:51.774561 #18047] DEBUG -- :   [1m[36mSQL (1.1ms)[0m  [1mSHOW FIELDS FROM active_users[0m
D, [2011-10-11T21:43:51.775964 #18047] DEBUG -- :   [1m[35mSQL (1.0ms)[0m  SHOW FIELDS FROM pending_users
D, [2011-10-11T21:43:51.777014 #18047] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW CREATE VIEW active_users[0m
D, [2011-10-11T21:43:51.777743 #18047] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE VIEW pending_users
D, [2011-10-11T21:43:51.786416 #18047] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mSHOW TRIGGERS[0m
D, [2011-10-11T21:43:51.788274 #18047] DEBUG -- :   [1m[35mSQL (0.8ms)[0m  SELECT DATABASE() as db
D, [2011-10-11T21:43:51.791527 #18047] DEBUG -- :   [1m[36mSQL (3.0ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:43:51.791955 #18047] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE PROCEDURE fix_user_state
D, [2011-10-11T21:43:51.792291 #18047] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE FUNCTION hello[0m
D, [2011-10-11T21:43:51.793906 #18047] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'
D, [2011-10-11T21:43:51.794170 #18047] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE TABLE `profiles`[0m
D, [2011-10-11T21:43:51.794422 #18047] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE TABLE `users`
D, [2011-10-11T21:43:51.794882 #18047] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
D, [2011-10-11T21:43:51.795740 #18047] DEBUG -- :   [1m[35mSQL (0.7ms)[0m  SHOW FIELDS FROM active_users
D, [2011-10-11T21:43:51.796495 #18047] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mSHOW FIELDS FROM pending_users[0m
D, [2011-10-11T21:43:51.797153 #18047] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE VIEW active_users
D, [2011-10-11T21:43:51.797547 #18047] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE VIEW pending_users[0m
D, [2011-10-11T21:43:51.798462 #18047] DEBUG -- :   [1m[35mSQL (0.7ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:43:51.798759 #18047] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
D, [2011-10-11T21:43:51.801064 #18047] DEBUG -- :   [1m[35mSQL (2.1ms)[0m  SELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'
D, [2011-10-11T21:43:51.801323 #18047] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE PROCEDURE fix_user_state[0m
D, [2011-10-11T21:43:51.801513 #18047] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE FUNCTION hello
D, [2011-10-11T21:43:51.830705 #18047] DEBUG -- :   [1m[36mSQL (13.9ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:43:51.831811 #18047] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:43:51.832261 #18047] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:43:51.909575 #18047] DEBUG -- :   [1m[35mSQL (76.5ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:43:51.948422 #18047] DEBUG -- :   [1m[36mSQL (38.5ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:43:51.958560 #18047] DEBUG -- :   [1m[35mSQL (9.8ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:43:51.967042 #18047] DEBUG -- :   [1m[36mSQL (8.1ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:43:51.967973 #18047] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:43:51.968691 #18047] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:43:51.974666 #18047] DEBUG -- :   [1m[35mSQL (5.6ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:43:51.975449 #18047] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:43:51.975985 #18047] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:43:51.982311 #18047] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:43:51.991556 #18047] DEBUG -- :   [1m[35mSQL (8.8ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:43:51.992451 #18047] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:43:51.993176 #18047] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:43:51.993990 #18047] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW TABLES[0m
D, [2011-10-11T21:43:51.995742 #18047] DEBUG -- :   [1m[35mSQL (1.2ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:43:52.001885 #18047] DEBUG -- :   [1m[36mSQL (5.6ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:44:25.699087 #18513] DEBUG -- :   [1m[36mSQL (20.4ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:44:25.699728 #18513] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:44:25.700144 #18513] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:44:25.740470 #18513] DEBUG -- :   [1m[35mSQL (39.9ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:44:25.766638 #18513] DEBUG -- :   [1m[36mSQL (25.7ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:44:25.774948 #18513] DEBUG -- :   [1m[35mSQL (7.9ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:44:25.783515 #18513] DEBUG -- :   [1m[36mSQL (8.2ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:44:25.784275 #18513] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:44:25.784762 #18513] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:44:25.790809 #18513] DEBUG -- :   [1m[35mSQL (5.6ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:44:25.791543 #18513] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:44:25.792033 #18513] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:44:25.797696 #18513] DEBUG -- :   [1m[36mSQL (5.3ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:44:25.807343 #18513] DEBUG -- :   [1m[35mSQL (9.3ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:44:25.808251 #18513] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:44:25.809183 #18513] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:44:25.811528 #18513] DEBUG -- :   [1m[36mSQL (0.8ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
D, [2011-10-11T21:44:25.812780 #18513] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW CREATE TABLE `profiles`
D, [2011-10-11T21:44:25.813861 #18513] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mSHOW CREATE TABLE `users`[0m
D, [2011-10-11T21:44:25.818202 #18513] DEBUG -- :   [1m[35mSQL (0.8ms)[0m  SHOW FULL TABLES WHERE Table_type = 'VIEW'
D, [2011-10-11T21:44:25.820028 #18513] DEBUG -- :   [1m[36mSQL (1.4ms)[0m  [1mSHOW FIELDS FROM active_users[0m
D, [2011-10-11T21:44:25.821442 #18513] DEBUG -- :   [1m[35mSQL (1.0ms)[0m  SHOW FIELDS FROM pending_users
D, [2011-10-11T21:44:25.822404 #18513] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE VIEW active_users[0m
D, [2011-10-11T21:44:25.823309 #18513] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW CREATE VIEW pending_users
D, [2011-10-11T21:44:25.828160 #18513] DEBUG -- :   [1m[36mSQL (1.3ms)[0m  [1mSHOW TRIGGERS[0m
D, [2011-10-11T21:44:25.830965 #18513] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SELECT DATABASE() as db
D, [2011-10-11T21:44:25.836556 #18513] DEBUG -- :   [1m[36mSQL (5.2ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:44:25.837213 #18513] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW CREATE PROCEDURE fix_user_state
D, [2011-10-11T21:44:25.837469 #18513] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE FUNCTION hello[0m
D, [2011-10-11T21:44:25.839579 #18513] DEBUG -- :   [1m[35mSQL (0.7ms)[0m  SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'
D, [2011-10-11T21:44:25.840748 #18513] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE TABLE `profiles`[0m
D, [2011-10-11T21:44:25.841292 #18513] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW CREATE TABLE `users`
D, [2011-10-11T21:44:25.841604 #18513] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
D, [2011-10-11T21:44:25.842072 #18513] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW FIELDS FROM active_users
D, [2011-10-11T21:44:25.842911 #18513] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mSHOW FIELDS FROM pending_users[0m
D, [2011-10-11T21:44:25.843743 #18513] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE VIEW active_users
D, [2011-10-11T21:44:25.844539 #18513] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE VIEW pending_users[0m
D, [2011-10-11T21:44:25.846642 #18513] DEBUG -- :   [1m[35mSQL (1.6ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:44:25.847221 #18513] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSELECT DATABASE() as db[0m
D, [2011-10-11T21:44:25.848937 #18513] DEBUG -- :   [1m[35mSQL (1.4ms)[0m  SELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'
D, [2011-10-11T21:44:25.849583 #18513] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE PROCEDURE fix_user_state[0m
D, [2011-10-11T21:44:25.850114 #18513] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE FUNCTION hello
D, [2011-10-11T21:44:25.888385 #18513] DEBUG -- :   [1m[36mSQL (17.5ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:44:25.888714 #18513] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:44:25.888857 #18513] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:44:25.927379 #18513] DEBUG -- :   [1m[35mSQL (38.0ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:44:25.959582 #18513] DEBUG -- :   [1m[36mSQL (31.6ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:44:25.968036 #18513] DEBUG -- :   [1m[35mSQL (8.0ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:44:25.976431 #18513] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:44:25.977302 #18513] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:44:25.978018 #18513] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:44:25.984390 #18513] DEBUG -- :   [1m[35mSQL (5.9ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:44:25.985468 #18513] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:44:25.986095 #18513] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:44:25.992442 #18513] DEBUG -- :   [1m[36mSQL (6.1ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:44:26.001700 #18513] DEBUG -- :   [1m[35mSQL (9.0ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:44:26.002263 #18513] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:44:26.002606 #18513] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:44:26.002913 #18513] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW TABLES[0m
D, [2011-10-11T21:44:26.003887 #18513] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:44:26.005614 #18513] DEBUG -- :   [1m[36mSQL (1.3ms)[0m  [1mSELECT ROUTINE_NAME FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:44:47.879514 #18896] DEBUG -- :   [1m[36mSQL (50.0ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:44:47.880265 #18896] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:44:47.880629 #18896] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:44:47.926927 #18896] DEBUG -- :   [1m[35mSQL (46.0ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:44:47.952754 #18896] DEBUG -- :   [1m[36mSQL (25.6ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:44:47.960969 #18896] DEBUG -- :   [1m[35mSQL (8.0ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:44:47.968817 #18896] DEBUG -- :   [1m[36mSQL (7.6ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:44:47.969465 #18896] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:44:47.969826 #18896] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:44:47.975756 #18896] DEBUG -- :   [1m[35mSQL (5.7ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:44:47.976326 #18896] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:44:47.976716 #18896] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:44:47.982282 #18896] DEBUG -- :   [1m[36mSQL (5.3ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:44:47.993485 #18896] DEBUG -- :   [1m[35mSQL (10.9ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:44:47.994182 #18896] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:44:47.994769 #18896] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:44:47.996260 #18896] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
D, [2011-10-11T21:44:47.996952 #18896] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE TABLE `profiles`
D, [2011-10-11T21:44:47.997606 #18896] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE TABLE `users`[0m
D, [2011-10-11T21:44:48.000314 #18896] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW FULL TABLES WHERE Table_type = 'VIEW'
D, [2011-10-11T21:44:48.001802 #18896] DEBUG -- :   [1m[36mSQL (1.1ms)[0m  [1mSHOW FIELDS FROM active_users[0m
D, [2011-10-11T21:44:48.003033 #18896] DEBUG -- :   [1m[35mSQL (1.0ms)[0m  SHOW FIELDS FROM pending_users
D, [2011-10-11T21:44:48.003716 #18896] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE VIEW active_users[0m
D, [2011-10-11T21:44:48.004300 #18896] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE VIEW pending_users
D, [2011-10-11T21:44:48.010856 #18896] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mSHOW TRIGGERS[0m
D, [2011-10-11T21:44:48.013523 #18896] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SELECT DATABASE() as db
D, [2011-10-11T21:44:48.018363 #18896] DEBUG -- :   [1m[36mSQL (4.3ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:44:48.019281 #18896] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW CREATE PROCEDURE fix_user_state
D, [2011-10-11T21:44:48.020120 #18896] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE FUNCTION hello[0m
D, [2011-10-11T21:44:48.023041 #18896] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'
D, [2011-10-11T21:44:48.023276 #18896] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE TABLE `profiles`[0m
D, [2011-10-11T21:44:48.023432 #18896] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE TABLE `users`
D, [2011-10-11T21:44:48.023859 #18896] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
D, [2011-10-11T21:44:48.024634 #18896] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW FIELDS FROM active_users
D, [2011-10-11T21:44:48.025862 #18896] DEBUG -- :   [1m[36mSQL (0.9ms)[0m  [1mSHOW FIELDS FROM pending_users[0m
D, [2011-10-11T21:44:48.026161 #18896] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE VIEW active_users
D, [2011-10-11T21:44:48.026431 #18896] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE VIEW pending_users[0m
D, [2011-10-11T21:44:48.026951 #18896] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:44:48.027157 #18896] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
D, [2011-10-11T21:44:48.029297 #18896] DEBUG -- :   [1m[35mSQL (2.0ms)[0m  SELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'
D, [2011-10-11T21:44:48.029556 #18896] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE PROCEDURE fix_user_state[0m
D, [2011-10-11T21:44:48.029732 #18896] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE FUNCTION hello
D, [2011-10-11T21:44:48.060004 #18896] DEBUG -- :   [1m[36mSQL (16.2ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:44:48.061107 #18896] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:44:48.061719 #18896] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:44:48.095475 #18896] DEBUG -- :   [1m[35mSQL (33.0ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:44:48.121851 #18896] DEBUG -- :   [1m[36mSQL (25.8ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:44:48.129944 #18896] DEBUG -- :   [1m[35mSQL (7.7ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:44:48.138651 #18896] DEBUG -- :   [1m[36mSQL (8.5ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:44:48.139268 #18896] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:44:48.139595 #18896] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:44:48.145117 #18896] DEBUG -- :   [1m[35mSQL (5.4ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:44:48.145703 #18896] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:44:48.146040 #18896] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:44:48.151477 #18896] DEBUG -- :   [1m[36mSQL (5.2ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:44:48.162630 #18896] DEBUG -- :   [1m[35mSQL (10.9ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:44:48.163425 #18896] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:44:48.164194 #18896] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:44:48.164994 #18896] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW TABLES[0m
D, [2011-10-11T21:44:48.166689 #18896] DEBUG -- :   [1m[35mSQL (1.3ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:44:48.171975 #18896] DEBUG -- :   [1m[36mSQL (4.8ms)[0m  [1mSELECT ROUTINE_NAME FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:45:52.680455 #19605] DEBUG -- :   [1m[36mSQL (23.6ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:45:52.681294 #19605] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:45:52.681747 #19605] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:45:52.758017 #19605] DEBUG -- :   [1m[35mSQL (76.0ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:45:52.783968 #19605] DEBUG -- :   [1m[36mSQL (25.6ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:45:52.792079 #19605] DEBUG -- :   [1m[35mSQL (7.8ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:45:52.800521 #19605] DEBUG -- :   [1m[36mSQL (8.2ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:45:52.801163 #19605] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:45:52.801595 #19605] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:45:52.807236 #19605] DEBUG -- :   [1m[35mSQL (5.4ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:45:52.807901 #19605] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:45:52.808332 #19605] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:45:52.814155 #19605] DEBUG -- :   [1m[36mSQL (5.5ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:45:52.828795 #19605] DEBUG -- :   [1m[35mSQL (14.4ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:45:52.829571 #19605] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:45:52.830058 #19605] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:45:52.830993 #19605] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
D, [2011-10-11T21:45:52.831504 #19605] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE TABLE `profiles`
D, [2011-10-11T21:45:52.832028 #19605] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE TABLE `users`[0m
D, [2011-10-11T21:45:52.833237 #19605] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW FULL TABLES WHERE Table_type = 'VIEW'
D, [2011-10-11T21:45:52.834387 #19605] DEBUG -- :   [1m[36mSQL (1.0ms)[0m  [1mSHOW FIELDS FROM active_users[0m
D, [2011-10-11T21:45:52.835382 #19605] DEBUG -- :   [1m[35mSQL (0.9ms)[0m  SHOW FIELDS FROM pending_users
D, [2011-10-11T21:45:52.835873 #19605] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE VIEW active_users[0m
D, [2011-10-11T21:45:52.836403 #19605] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE VIEW pending_users
D, [2011-10-11T21:45:52.839957 #19605] DEBUG -- :   [1m[36mSQL (1.2ms)[0m  [1mSHOW TRIGGERS[0m
D, [2011-10-11T21:45:52.841341 #19605] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SELECT DATABASE() as db
D, [2011-10-11T21:45:52.845417 #19605] DEBUG -- :   [1m[36mSQL (3.7ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:45:52.846003 #19605] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW CREATE PROCEDURE fix_user_state
D, [2011-10-11T21:45:52.846355 #19605] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE FUNCTION hello[0m
D, [2011-10-11T21:45:52.847975 #19605] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'
D, [2011-10-11T21:45:52.848384 #19605] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE TABLE `profiles`[0m
D, [2011-10-11T21:45:52.848657 #19605] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE TABLE `users`
D, [2011-10-11T21:45:52.849071 #19605] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
D, [2011-10-11T21:45:52.849606 #19605] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW FIELDS FROM active_users
D, [2011-10-11T21:45:52.850144 #19605] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW FIELDS FROM pending_users[0m
D, [2011-10-11T21:45:52.850441 #19605] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE VIEW active_users
D, [2011-10-11T21:45:52.850731 #19605] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE VIEW pending_users[0m
D, [2011-10-11T21:45:52.851356 #19605] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:45:52.851654 #19605] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
D, [2011-10-11T21:45:52.853124 #19605] DEBUG -- :   [1m[35mSQL (1.3ms)[0m  SELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'
D, [2011-10-11T21:45:52.853431 #19605] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE PROCEDURE fix_user_state[0m
D, [2011-10-11T21:45:52.853710 #19605] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE FUNCTION hello
D, [2011-10-11T21:45:52.918253 #19605] DEBUG -- :   [1m[36mSQL (45.9ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:45:52.919103 #19605] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:45:52.919589 #19605] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:45:52.958386 #19605] DEBUG -- :   [1m[35mSQL (37.9ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:45:52.991623 #19605] DEBUG -- :   [1m[36mSQL (32.7ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:45:52.999633 #19605] DEBUG -- :   [1m[35mSQL (7.5ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:45:53.007448 #19605] DEBUG -- :   [1m[36mSQL (7.4ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:45:53.008214 #19605] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:45:53.008719 #19605] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:45:53.014219 #19605] DEBUG -- :   [1m[35mSQL (5.1ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:45:53.015218 #19605] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:45:53.015945 #19605] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:45:53.027736 #19605] DEBUG -- :   [1m[36mSQL (11.4ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:45:53.036786 #19605] DEBUG -- :   [1m[35mSQL (8.7ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:45:53.037379 #19605] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:45:53.037878 #19605] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:45:53.038499 #19605] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mSHOW TABLES[0m
D, [2011-10-11T21:45:53.039497 #19605] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:45:53.041601 #19605] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mSELECT ROUTINE_NAME FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:46:02.022623 #20086] DEBUG -- :   [1m[36mSQL (17.3ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:46:02.023587 #20086] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:46:02.024127 #20086] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:46:02.061471 #20086] DEBUG -- :   [1m[35mSQL (36.9ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:46:02.088357 #20086] DEBUG -- :   [1m[36mSQL (26.5ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:46:02.096326 #20086] DEBUG -- :   [1m[35mSQL (7.8ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:46:02.104394 #20086] DEBUG -- :   [1m[36mSQL (7.9ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:46:02.104934 #20086] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:46:02.105243 #20086] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:46:02.110266 #20086] DEBUG -- :   [1m[35mSQL (4.8ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:46:02.110869 #20086] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:46:02.111268 #20086] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:46:02.117214 #20086] DEBUG -- :   [1m[36mSQL (5.6ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:46:02.126701 #20086] DEBUG -- :   [1m[35mSQL (9.2ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:46:02.127412 #20086] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:46:02.128053 #20086] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:46:02.129883 #20086] DEBUG -- :   [1m[36mSQL (0.7ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
D, [2011-10-11T21:46:02.130805 #20086] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE TABLE `profiles`
D, [2011-10-11T21:46:02.131584 #20086] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW CREATE TABLE `users`[0m
D, [2011-10-11T21:46:02.134190 #20086] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW FULL TABLES WHERE Table_type = 'VIEW'
D, [2011-10-11T21:46:02.135629 #20086] DEBUG -- :   [1m[36mSQL (1.1ms)[0m  [1mSHOW FIELDS FROM active_users[0m
D, [2011-10-11T21:46:02.137023 #20086] DEBUG -- :   [1m[35mSQL (0.9ms)[0m  SHOW FIELDS FROM pending_users
D, [2011-10-11T21:46:02.137936 #20086] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW CREATE VIEW active_users[0m
D, [2011-10-11T21:46:02.138653 #20086] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE VIEW pending_users
D, [2011-10-11T21:46:02.148153 #20086] DEBUG -- :   [1m[36mSQL (2.1ms)[0m  [1mSHOW TRIGGERS[0m
D, [2011-10-11T21:46:02.151680 #20086] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SELECT DATABASE() as db
D, [2011-10-11T21:46:02.157013 #20086] DEBUG -- :   [1m[36mSQL (4.8ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:46:02.157776 #20086] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW CREATE PROCEDURE fix_user_state
D, [2011-10-11T21:46:02.158216 #20086] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE FUNCTION hello[0m
D, [2011-10-11T21:46:02.161553 #20086] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'
D, [2011-10-11T21:46:02.162054 #20086] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE TABLE `profiles`[0m
D, [2011-10-11T21:46:02.162359 #20086] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE TABLE `users`
D, [2011-10-11T21:46:02.162670 #20086] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
D, [2011-10-11T21:46:02.163268 #20086] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW FIELDS FROM active_users
D, [2011-10-11T21:46:02.163912 #20086] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW FIELDS FROM pending_users[0m
D, [2011-10-11T21:46:02.164271 #20086] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE VIEW active_users
D, [2011-10-11T21:46:02.164558 #20086] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE VIEW pending_users[0m
D, [2011-10-11T21:46:02.165327 #20086] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:46:02.165712 #20086] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSELECT DATABASE() as db[0m
D, [2011-10-11T21:46:02.167448 #20086] DEBUG -- :   [1m[35mSQL (1.6ms)[0m  SELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'
D, [2011-10-11T21:46:02.167656 #20086] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE PROCEDURE fix_user_state[0m
D, [2011-10-11T21:46:02.167812 #20086] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE FUNCTION hello
D, [2011-10-11T21:46:02.199324 #20086] DEBUG -- :   [1m[36mSQL (15.8ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:46:02.200151 #20086] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:46:02.200571 #20086] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:46:02.234416 #20086] DEBUG -- :   [1m[35mSQL (33.1ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:46:02.258198 #20086] DEBUG -- :   [1m[36mSQL (23.5ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:46:02.265690 #20086] DEBUG -- :   [1m[35mSQL (7.3ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:46:02.273255 #20086] DEBUG -- :   [1m[36mSQL (7.4ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:46:02.273757 #20086] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:46:02.274031 #20086] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:46:02.279346 #20086] DEBUG -- :   [1m[35mSQL (5.1ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:46:02.279943 #20086] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:46:02.280426 #20086] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:46:02.286069 #20086] DEBUG -- :   [1m[36mSQL (5.4ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:46:02.295187 #20086] DEBUG -- :   [1m[35mSQL (8.9ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:46:02.296011 #20086] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:46:02.296664 #20086] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:46:02.297413 #20086] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW TABLES[0m
D, [2011-10-11T21:46:02.298973 #20086] DEBUG -- :   [1m[35mSQL (1.2ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:46:02.304259 #20086] DEBUG -- :   [1m[36mSQL (4.9ms)[0m  [1mSELECT ROUTINE_NAME FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;36;1mSQL (0.000129)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.000095)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.016237)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000313)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000142)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.078905)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.025258)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.008528)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.008097)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000447)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000268)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005143)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000441)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000213)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005720)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.009421)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000462)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000489)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.000724)[0m   [0;1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
  [4;35;1mSQL (0.000390)[0m   [0mSHOW CREATE TABLE `profiles`[0m
  [4;36;1mSQL (0.000450)[0m   [0;1mSHOW CREATE TABLE `users`[0m
  [4;35;1mSQL (0.022264)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000377)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000131)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.034723)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.024568)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.007068)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007550)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000433)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000204)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.005395)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000394)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000196)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.041303)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.009304)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000423)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000359)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000487)[0m   [0mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
  [4;36;1mSQL (0.001314)[0m   [0;1mSHOW FIELDS FROM active_users[0m
  [4;35;1mSQL (0.000850)[0m   [0mSHOW FIELDS FROM pending_users[0m
  [4;36;1mSQL (0.000337)[0m   [0;1mSHOW CREATE VIEW active_users[0m
  [4;35;1mSQL (0.000324)[0m   [0mSHOW CREATE VIEW pending_users[0m
  [4;36;1mSQL (0.015713)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000364)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000127)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.038265)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.025512)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007547)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007234)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000438)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000197)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005581)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000398)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000186)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.010883)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.009618)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000468)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000380)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.001557)[0m   [0;1mSHOW TRIGGERS[0m
  [4;35;1mSQL (0.015707)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000562)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000225)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.066060)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.026048)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.044417)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.006970)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000416)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000158)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.004967)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000240)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000101)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.005162)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.009209)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000420)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000365)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000169)[0m   [0mSELECT DATABASE() as db[0m
  [4;36;1mSQL (0.003906)[0m   [0;1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;35;1mSQL (0.000441)[0m   [0mSHOW CREATE PROCEDURE fix_user_state[0m
  [4;36;1mSQL (0.000317)[0m   [0;1mSHOW CREATE FUNCTION hello[0m
  [4;35;1mSQL (0.016032)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.002908)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000139)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.032541)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.024250)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.007335)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007752)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000437)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000214)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.005172)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000392)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000191)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.005611)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.009361)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000467)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000399)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000526)[0m   [0mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
  [4;36;1mSQL (0.000370)[0m   [0;1mSHOW CREATE TABLE `profiles`[0m
  [4;35;1mSQL (0.000431)[0m   [0mSHOW CREATE TABLE `users`[0m
  [4;36;1mSQL (0.000423)[0m   [0;1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
  [4;35;1mSQL (0.000975)[0m   [0mSHOW FIELDS FROM active_users[0m
  [4;36;1mSQL (0.000958)[0m   [0;1mSHOW FIELDS FROM pending_users[0m
  [4;35;1mSQL (0.000367)[0m   [0mSHOW CREATE VIEW active_users[0m
  [4;36;1mSQL (0.000353)[0m   [0;1mSHOW CREATE VIEW pending_users[0m
  [4;35;1mSQL (0.001364)[0m   [0mSHOW TRIGGERS[0m
  [4;36;1mSQL (0.000180)[0m   [0;1mSELECT DATABASE() as db[0m
  [4;35;1mSQL (0.005471)[0m   [0mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;36;1mSQL (0.000526)[0m   [0;1mSHOW CREATE PROCEDURE fix_user_state[0m
  [4;35;1mSQL (0.000384)[0m   [0mSHOW CREATE FUNCTION hello[0m
  [4;36;1mSQL (0.018110)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000369)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000131)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.033436)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.025301)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007756)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007756)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000142)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000059)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.004970)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000322)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000132)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005050)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.008859)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000442)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000354)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.014854)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000379)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000149)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.037961)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.027454)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007475)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007522)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000452)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000287)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005323)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000423)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000207)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005559)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.009242)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000450)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000391)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.000453)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.001151)[0m   [0mSHOW TRIGGERS[0m
D, [2011-10-11T21:46:17.904836 #20595] DEBUG -- :   [1m[36mSQL (14.5ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:46:17.905314 #20595] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:46:17.905487 #20595] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:46:17.943568 #20595] DEBUG -- :   [1m[35mSQL (37.8ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:46:17.975458 #20595] DEBUG -- :   [1m[36mSQL (31.5ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:46:17.983250 #20595] DEBUG -- :   [1m[35mSQL (7.5ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:46:17.997482 #20595] DEBUG -- :   [1m[36mSQL (14.0ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:46:17.998133 #20595] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:46:17.998525 #20595] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:46:18.003918 #20595] DEBUG -- :   [1m[35mSQL (5.2ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:46:18.004527 #20595] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:46:18.004932 #20595] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:46:18.010611 #20595] DEBUG -- :   [1m[36mSQL (5.4ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:46:18.019971 #20595] DEBUG -- :   [1m[35mSQL (9.1ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:46:18.020694 #20595] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:46:18.021320 #20595] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:46:18.023210 #20595] DEBUG -- :   [1m[36mSQL (0.7ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
D, [2011-10-11T21:46:18.024070 #20595] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE TABLE `profiles`
D, [2011-10-11T21:46:18.024856 #20595] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW CREATE TABLE `users`[0m
D, [2011-10-11T21:46:18.027440 #20595] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW FULL TABLES WHERE Table_type = 'VIEW'
D, [2011-10-11T21:46:18.028850 #20595] DEBUG -- :   [1m[36mSQL (1.1ms)[0m  [1mSHOW FIELDS FROM active_users[0m
D, [2011-10-11T21:46:18.030118 #20595] DEBUG -- :   [1m[35mSQL (0.9ms)[0m  SHOW FIELDS FROM pending_users
D, [2011-10-11T21:46:18.030878 #20595] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE VIEW active_users[0m
D, [2011-10-11T21:46:18.031527 #20595] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW CREATE VIEW pending_users
D, [2011-10-11T21:46:18.038663 #20595] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mSHOW TRIGGERS[0m
D, [2011-10-11T21:46:18.042017 #20595] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SELECT DATABASE() as db
D, [2011-10-11T21:46:18.046523 #20595] DEBUG -- :   [1m[36mSQL (4.0ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:46:18.046810 #20595] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE PROCEDURE fix_user_state
D, [2011-10-11T21:46:18.047034 #20595] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE FUNCTION hello[0m
D, [2011-10-11T21:46:18.048049 #20595] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'
D, [2011-10-11T21:46:18.048420 #20595] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE TABLE `profiles`[0m
D, [2011-10-11T21:46:18.048666 #20595] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE TABLE `users`
D, [2011-10-11T21:46:18.049025 #20595] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
D, [2011-10-11T21:46:18.049678 #20595] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW FIELDS FROM active_users
D, [2011-10-11T21:46:18.050784 #20595] DEBUG -- :   [1m[36mSQL (0.8ms)[0m  [1mSHOW FIELDS FROM pending_users[0m
D, [2011-10-11T21:46:18.051227 #20595] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE VIEW active_users
D, [2011-10-11T21:46:18.051511 #20595] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE VIEW pending_users[0m
D, [2011-10-11T21:46:18.052328 #20595] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:46:18.052624 #20595] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
D, [2011-10-11T21:46:18.054510 #20595] DEBUG -- :   [1m[35mSQL (1.5ms)[0m  SELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'
D, [2011-10-11T21:46:18.055162 #20595] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE PROCEDURE fix_user_state[0m
D, [2011-10-11T21:46:18.055813 #20595] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE FUNCTION hello
D, [2011-10-11T21:46:18.092515 #20595] DEBUG -- :   [1m[36mSQL (16.9ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:46:18.093194 #20595] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:46:18.093512 #20595] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:46:18.133923 #20595] DEBUG -- :   [1m[35mSQL (39.9ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:46:18.159329 #20595] DEBUG -- :   [1m[36mSQL (24.9ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:46:18.168235 #20595] DEBUG -- :   [1m[35mSQL (8.4ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:46:18.176300 #20595] DEBUG -- :   [1m[36mSQL (7.6ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:46:18.177103 #20595] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:46:18.177599 #20595] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:46:18.182586 #20595] DEBUG -- :   [1m[35mSQL (4.6ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:46:18.183330 #20595] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:46:18.183821 #20595] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:46:18.189656 #20595] DEBUG -- :   [1m[36mSQL (5.5ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:46:18.229179 #20595] DEBUG -- :   [1m[35mSQL (39.1ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:46:18.230092 #20595] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:46:18.230801 #20595] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:46:18.231610 #20595] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW TABLES[0m
D, [2011-10-11T21:46:18.233310 #20595] DEBUG -- :   [1m[35mSQL (1.2ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:46:18.238632 #20595] DEBUG -- :   [1m[36mSQL (4.8ms)[0m  [1mSELECT ROUTINE_NAME FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;36;1mSQL (0.000194)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.000103)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.018689)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000409)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000116)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.041554)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.025345)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.008109)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.099184)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000451)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000206)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.004985)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000412)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000189)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005572)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.008796)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000459)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000395)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.000590)[0m   [0;1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
  [4;35;1mSQL (0.000375)[0m   [0mSHOW CREATE TABLE `profiles`[0m
  [4;36;1mSQL (0.000438)[0m   [0;1mSHOW CREATE TABLE `users`[0m
  [4;35;1mSQL (0.015958)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000364)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000138)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.033719)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.060194)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.007904)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007315)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000417)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000168)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.005548)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000344)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000140)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.006415)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.010025)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000498)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000391)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000518)[0m   [0mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
  [4;36;1mSQL (0.001231)[0m   [0;1mSHOW FIELDS FROM active_users[0m
  [4;35;1mSQL (0.001026)[0m   [0mSHOW FIELDS FROM pending_users[0m
  [4;36;1mSQL (0.000404)[0m   [0;1mSHOW CREATE VIEW active_users[0m
  [4;35;1mSQL (0.000362)[0m   [0mSHOW CREATE VIEW pending_users[0m
  [4;36;1mSQL (0.018435)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000218)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000136)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.185426)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.027534)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007253)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007741)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000431)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000214)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.004599)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000392)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000194)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005371)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.008918)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000448)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000399)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.001559)[0m   [0;1mSHOW TRIGGERS[0m
  [4;35;1mSQL (0.021996)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000151)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000054)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.032176)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.024322)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.007581)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007241)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000424)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000194)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.004808)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000493)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000204)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.005458)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.008579)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000435)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000418)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000182)[0m   [0mSELECT DATABASE() as db[0m
  [4;36;1mSQL (0.004468)[0m   [0;1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;35;1mSQL (0.000469)[0m   [0mSHOW CREATE PROCEDURE fix_user_state[0m
  [4;36;1mSQL (0.000408)[0m   [0;1mSHOW CREATE FUNCTION hello[0m
  [4;35;1mSQL (0.018101)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000446)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000147)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.033049)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.032344)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.007996)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007406)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000143)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000054)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.004540)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000311)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000130)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.012189)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.009573)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000205)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000162)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000495)[0m   [0mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
  [4;36;1mSQL (0.000327)[0m   [0;1mSHOW CREATE TABLE `profiles`[0m
  [4;35;1mSQL (0.000394)[0m   [0mSHOW CREATE TABLE `users`[0m
  [4;36;1mSQL (0.000403)[0m   [0;1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
  [4;35;1mSQL (0.001018)[0m   [0mSHOW FIELDS FROM active_users[0m
  [4;36;1mSQL (0.000885)[0m   [0;1mSHOW FIELDS FROM pending_users[0m
  [4;35;1mSQL (0.000365)[0m   [0mSHOW CREATE VIEW active_users[0m
  [4;36;1mSQL (0.000345)[0m   [0;1mSHOW CREATE VIEW pending_users[0m
  [4;35;1mSQL (0.001113)[0m   [0mSHOW TRIGGERS[0m
  [4;36;1mSQL (0.000163)[0m   [0;1mSELECT DATABASE() as db[0m
  [4;35;1mSQL (0.005952)[0m   [0mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;36;1mSQL (0.000567)[0m   [0;1mSHOW CREATE PROCEDURE fix_user_state[0m
  [4;35;1mSQL (0.000427)[0m   [0mSHOW CREATE FUNCTION hello[0m
  [4;36;1mSQL (0.021350)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000361)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000177)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.156350)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.024572)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.013341)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007063)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000427)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000188)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005352)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000494)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000234)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005706)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.008395)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000454)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000391)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.018144)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000377)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000132)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.036479)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.023430)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007663)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007212)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000416)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000196)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005106)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000406)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000195)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005487)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.009225)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000456)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000391)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.000460)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.001208)[0m   [0mSHOW TRIGGERS[0m
  [4;36;1mSQL (0.000195)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.000149)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.023855)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000373)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000138)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.054008)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.023569)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.008751)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.008237)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000230)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000168)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.004670)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000397)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000186)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005643)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.009374)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000554)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000409)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.000556)[0m   [0;1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
  [4;35;1mSQL (0.000367)[0m   [0mSHOW CREATE TABLE `profiles`[0m
  [4;36;1mSQL (0.000441)[0m   [0;1mSHOW CREATE TABLE `users`[0m
  [4;35;1mSQL (0.043604)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000378)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000132)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.033426)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.024657)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.007624)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007895)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000416)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000196)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.004559)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000407)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000185)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.005475)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.009366)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000468)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000388)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000522)[0m   [0mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
  [4;36;1mSQL (0.001463)[0m   [0;1mSHOW FIELDS FROM active_users[0m
  [4;35;1mSQL (0.001049)[0m   [0mSHOW FIELDS FROM pending_users[0m
  [4;36;1mSQL (0.000393)[0m   [0;1mSHOW CREATE VIEW active_users[0m
  [4;35;1mSQL (0.000457)[0m   [0mSHOW CREATE VIEW pending_users[0m
  [4;36;1mSQL (0.017784)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000355)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000128)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.039067)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.029666)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.015891)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007038)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000416)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000190)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005250)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000370)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000187)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005316)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.008673)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000474)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000390)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.001290)[0m   [0;1mSHOW TRIGGERS[0m
  [4;35;1mSQL (0.017267)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000357)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000129)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.032841)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.024303)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.007535)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007205)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000417)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000193)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.004911)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000407)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000286)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.006699)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.008911)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000444)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000375)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000192)[0m   [0mSELECT DATABASE() as db[0m
  [4;36;1mSQL (0.005014)[0m   [0;1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;35;1mSQL (0.000507)[0m   [0mSHOW CREATE PROCEDURE fix_user_state[0m
  [4;36;1mSQL (0.000394)[0m   [0;1mSHOW CREATE FUNCTION hello[0m
  [4;35;1mSQL (0.055269)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000365)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000116)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.031100)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.025297)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.008225)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007888)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000406)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000191)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.005384)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000380)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000182)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.005116)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.008999)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000464)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000396)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000500)[0m   [0mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
  [4;36;1mSQL (0.000339)[0m   [0;1mSHOW CREATE TABLE `profiles`[0m
  [4;35;1mSQL (0.000410)[0m   [0mSHOW CREATE TABLE `users`[0m
  [4;36;1mSQL (0.000408)[0m   [0;1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
  [4;35;1mSQL (0.001021)[0m   [0mSHOW FIELDS FROM active_users[0m
  [4;36;1mSQL (0.000946)[0m   [0;1mSHOW FIELDS FROM pending_users[0m
  [4;35;1mSQL (0.000390)[0m   [0mSHOW CREATE VIEW active_users[0m
  [4;36;1mSQL (0.000358)[0m   [0;1mSHOW CREATE VIEW pending_users[0m
  [4;35;1mSQL (0.001196)[0m   [0mSHOW TRIGGERS[0m
  [4;36;1mSQL (0.000178)[0m   [0;1mSELECT DATABASE() as db[0m
  [4;35;1mSQL (0.004785)[0m   [0mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;36;1mSQL (0.000446)[0m   [0;1mSHOW CREATE PROCEDURE fix_user_state[0m
  [4;35;1mSQL (0.000370)[0m   [0mSHOW CREATE FUNCTION hello[0m
  [4;36;1mSQL (0.053188)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000360)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000123)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.033178)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.024148)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.009502)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.006969)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000359)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000195)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005204)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000340)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000159)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005542)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.009343)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000439)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000385)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.015857)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000349)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000128)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.038690)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.082568)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007328)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007178)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000407)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000188)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005026)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000403)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000196)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005360)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.008787)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000429)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000431)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.000910)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.001363)[0m   [0mSHOW TRIGGERS[0m
  [4;36;1mSQL (0.001142)[0m   [0;1mSHOW TRIGGERS[0m
  [4;36;1mSQL (0.000145)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.000101)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.021585)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000296)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000090)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.044031)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.025370)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007982)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.008566)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000452)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000062)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.010516)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000473)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000189)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.006051)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.009504)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000421)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000333)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.000488)[0m   [0;1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
  [4;35;1mSQL (0.000323)[0m   [0mSHOW CREATE TABLE `profiles`[0m
  [4;36;1mSQL (0.000369)[0m   [0;1mSHOW CREATE TABLE `users`[0m
  [4;35;1mSQL (0.018032)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000489)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000204)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.031907)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.032627)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.007807)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007504)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000369)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000126)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.004892)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000364)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000128)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.006331)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.009050)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000372)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000340)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000416)[0m   [0mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
  [4;36;1mSQL (0.001072)[0m   [0;1mSHOW FIELDS FROM active_users[0m
  [4;35;1mSQL (0.000805)[0m   [0mSHOW FIELDS FROM pending_users[0m
  [4;36;1mSQL (0.000309)[0m   [0;1mSHOW CREATE VIEW active_users[0m
  [4;35;1mSQL (0.000285)[0m   [0mSHOW CREATE VIEW pending_users[0m
  [4;36;1mSQL (0.013926)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000410)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000165)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.034536)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.025044)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007687)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.008006)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000492)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000227)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.004851)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000392)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000193)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005759)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.009454)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000484)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000398)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.001364)[0m   [0;1mSHOW TRIGGERS[0m
  [4;35;1mSQL (0.017986)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000412)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000148)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.071991)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.024833)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.008275)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007393)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000515)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000236)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.010714)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000574)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000246)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.005432)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.009789)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000417)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000345)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000173)[0m   [0mSELECT DATABASE() as db[0m
  [4;36;1mSQL (0.003756)[0m   [0;1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;35;1mSQL (0.000401)[0m   [0mSHOW CREATE PROCEDURE fix_user_state[0m
  [4;36;1mSQL (0.000331)[0m   [0;1mSHOW CREATE FUNCTION hello[0m
  [4;35;1mSQL (0.023858)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000374)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000142)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.031203)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.026791)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.013632)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.006957)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000381)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000156)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.004707)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000376)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000160)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.005454)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.009285)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000453)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000387)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000509)[0m   [0mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
  [4;36;1mSQL (0.000354)[0m   [0;1mSHOW CREATE TABLE `profiles`[0m
  [4;35;1mSQL (0.000486)[0m   [0mSHOW CREATE TABLE `users`[0m
  [4;36;1mSQL (0.000418)[0m   [0;1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
  [4;35;1mSQL (0.000961)[0m   [0mSHOW FIELDS FROM active_users[0m
  [4;36;1mSQL (0.000894)[0m   [0;1mSHOW FIELDS FROM pending_users[0m
  [4;35;1mSQL (0.000412)[0m   [0mSHOW CREATE VIEW active_users[0m
  [4;36;1mSQL (0.000449)[0m   [0;1mSHOW CREATE VIEW pending_users[0m
  [4;35;1mSQL (0.001073)[0m   [0mSHOW TRIGGERS[0m
  [4;36;1mSQL (0.000171)[0m   [0;1mSELECT DATABASE() as db[0m
  [4;35;1mSQL (0.004451)[0m   [0mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;36;1mSQL (0.000429)[0m   [0;1mSHOW CREATE PROCEDURE fix_user_state[0m
  [4;35;1mSQL (0.000366)[0m   [0mSHOW CREATE FUNCTION hello[0m
  [4;36;1mSQL (0.023061)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000212)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000053)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.032745)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.025055)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007521)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007272)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000328)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000160)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.004197)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000305)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000140)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005434)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.009176)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000542)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000386)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.016911)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000365)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000141)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.033456)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.061449)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007813)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007466)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000408)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000200)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005484)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000427)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000207)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005485)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.010588)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000611)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000451)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.000621)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.001678)[0m   [0mSHOW TRIGGERS[0m
  [4;36;1mSQL (0.001139)[0m   [0;1mSHOW TRIGGERS[0m
  [4;36;1mSQL (0.000065)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.000039)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.046985)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000472)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000140)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.045929)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.026828)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007775)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007314)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000406)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000190)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005097)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000433)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000212)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005141)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.014681)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000655)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000406)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.000334)[0m   [0;1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
  [4;35;1mSQL (0.000161)[0m   [0mSHOW CREATE TABLE `profiles`[0m
  [4;36;1mSQL (0.000144)[0m   [0;1mSHOW CREATE TABLE `users`[0m
  [4;35;1mSQL (0.046960)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000164)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000042)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.034209)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.024652)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.007349)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007809)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000415)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000167)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.005182)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000423)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000200)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.005609)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.009128)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000551)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000382)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000528)[0m   [0mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
  [4;36;1mSQL (0.001324)[0m   [0;1mSHOW FIELDS FROM active_users[0m
  [4;35;1mSQL (0.000876)[0m   [0mSHOW FIELDS FROM pending_users[0m
  [4;36;1mSQL (0.000368)[0m   [0;1mSHOW CREATE VIEW active_users[0m
  [4;35;1mSQL (0.000387)[0m   [0mSHOW CREATE VIEW pending_users[0m
  [4;36;1mSQL (0.021921)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000417)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000134)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.032797)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.025889)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007515)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007126)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000412)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000195)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.004974)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000399)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000189)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005829)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.009872)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000605)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000458)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.000464)[0m   [0;1mSHOW TRIGGERS[0m
  [4;35;1mSQL (0.014992)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000175)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000072)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.032966)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.024814)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.007757)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007557)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000421)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000190)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.005121)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000381)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000183)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.005597)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.009154)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000510)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000393)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000196)[0m   [0mSELECT DATABASE() as db[0m
  [4;36;1mSQL (0.004347)[0m   [0;1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;35;1mSQL (0.000410)[0m   [0mSHOW CREATE PROCEDURE fix_user_state[0m
  [4;36;1mSQL (0.000345)[0m   [0;1mSHOW CREATE FUNCTION hello[0m
  [4;35;1mSQL (0.016933)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000413)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000140)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.033213)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.032894)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.007325)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007773)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000427)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000200)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.005435)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000593)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000201)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.005794)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.009172)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000504)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000443)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000603)[0m   [0mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
  [4;36;1mSQL (0.000407)[0m   [0;1mSHOW CREATE TABLE `profiles`[0m
  [4;35;1mSQL (0.000447)[0m   [0mSHOW CREATE TABLE `users`[0m
  [4;36;1mSQL (0.000433)[0m   [0;1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
  [4;35;1mSQL (0.001015)[0m   [0mSHOW FIELDS FROM active_users[0m
  [4;36;1mSQL (0.000907)[0m   [0;1mSHOW FIELDS FROM pending_users[0m
  [4;35;1mSQL (0.000373)[0m   [0mSHOW CREATE VIEW active_users[0m
  [4;36;1mSQL (0.000353)[0m   [0;1mSHOW CREATE VIEW pending_users[0m
  [4;35;1mSQL (0.001055)[0m   [0mSHOW TRIGGERS[0m
  [4;36;1mSQL (0.000159)[0m   [0;1mSELECT DATABASE() as db[0m
  [4;35;1mSQL (0.004121)[0m   [0mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;36;1mSQL (0.000425)[0m   [0;1mSHOW CREATE PROCEDURE fix_user_state[0m
  [4;35;1mSQL (0.000519)[0m   [0mSHOW CREATE FUNCTION hello[0m
  [4;36;1mSQL (0.017026)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000470)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000162)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.064206)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.025467)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.010625)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007927)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000583)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000267)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005703)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000229)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000172)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005605)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.009059)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000378)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000327)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.015273)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000351)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000137)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.032380)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.024906)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.008006)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.008042)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000406)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000228)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005307)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000405)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000255)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005435)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.014078)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000541)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000393)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.000448)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.001229)[0m   [0mSHOW TRIGGERS[0m
  [4;36;1mSQL (0.004356)[0m   [0;1mSELECT ROUTINE_NAME FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;36;1mSQL (0.000068)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.000042)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.018322)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000392)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000066)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.038349)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.024534)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.009009)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007464)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000387)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000212)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.004624)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000375)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000149)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005397)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.020255)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000479)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000376)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.000568)[0m   [0;1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
  [4;35;1mSQL (0.000286)[0m   [0mSHOW CREATE TABLE `profiles`[0m
  [4;36;1mSQL (0.000337)[0m   [0;1mSHOW CREATE TABLE `users`[0m
  [4;35;1mSQL (0.016182)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000516)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000237)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.036450)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.023843)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.008177)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007430)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000425)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000191)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.004898)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000395)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000184)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.005636)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.008539)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000463)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000423)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000533)[0m   [0mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
  [4;36;1mSQL (0.001352)[0m   [0;1mSHOW FIELDS FROM active_users[0m
  [4;35;1mSQL (0.001311)[0m   [0mSHOW FIELDS FROM pending_users[0m
  [4;36;1mSQL (0.000496)[0m   [0;1mSHOW CREATE VIEW active_users[0m
  [4;35;1mSQL (0.000477)[0m   [0mSHOW CREATE VIEW pending_users[0m
  [4;36;1mSQL (0.015914)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000358)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000126)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.037724)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.025909)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007676)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007510)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000419)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000211)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.004564)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000474)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000193)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005751)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.009316)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000451)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000382)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.001511)[0m   [0;1mSHOW TRIGGERS[0m
  [4;35;1mSQL (0.016509)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000472)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000135)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.089436)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.026217)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.007690)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007407)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000418)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000192)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.005207)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000416)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000190)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.005548)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.009265)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000558)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000478)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000208)[0m   [0mSELECT DATABASE() as db[0m
  [4;36;1mSQL (0.002871)[0m   [0;1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;35;1mSQL (0.000359)[0m   [0mSHOW CREATE PROCEDURE fix_user_state[0m
  [4;36;1mSQL (0.000361)[0m   [0;1mSHOW CREATE FUNCTION hello[0m
  [4;35;1mSQL (0.014982)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000178)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000054)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.032793)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.025874)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.008011)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007681)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000426)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000198)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.004450)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000379)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000185)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.005413)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.009882)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000434)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000434)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000595)[0m   [0mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
  [4;36;1mSQL (0.000406)[0m   [0;1mSHOW CREATE TABLE `profiles`[0m
  [4;35;1mSQL (0.000438)[0m   [0mSHOW CREATE TABLE `users`[0m
  [4;36;1mSQL (0.000426)[0m   [0;1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
  [4;35;1mSQL (0.001036)[0m   [0mSHOW FIELDS FROM active_users[0m
  [4;36;1mSQL (0.000916)[0m   [0;1mSHOW FIELDS FROM pending_users[0m
  [4;35;1mSQL (0.000370)[0m   [0mSHOW CREATE VIEW active_users[0m
  [4;36;1mSQL (0.000351)[0m   [0;1mSHOW CREATE VIEW pending_users[0m
  [4;35;1mSQL (0.001059)[0m   [0mSHOW TRIGGERS[0m
  [4;36;1mSQL (0.000160)[0m   [0;1mSELECT DATABASE() as db[0m
  [4;35;1mSQL (0.004211)[0m   [0mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;36;1mSQL (0.000428)[0m   [0;1mSHOW CREATE PROCEDURE fix_user_state[0m
  [4;35;1mSQL (0.000362)[0m   [0mSHOW CREATE FUNCTION hello[0m
  [4;36;1mSQL (0.015738)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000361)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000129)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.033552)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.026719)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007667)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.013385)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000415)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000194)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005368)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000417)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000189)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005500)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.008856)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000573)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000396)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.016256)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000390)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000129)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.031256)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.026514)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.008116)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007119)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000427)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000260)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005106)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000420)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000189)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005215)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.009395)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000560)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000429)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.000460)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.001153)[0m   [0mSHOW TRIGGERS[0m
  [4;36;1mSQL (0.004110)[0m   [0;1mSELECT ROUTINE_NAME FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;36;1mSQL (0.000070)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.000139)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.016797)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000223)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000142)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.036893)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.032728)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.008036)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007080)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000512)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000291)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005700)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000495)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000204)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005554)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.008790)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000467)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000452)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.000576)[0m   [0;1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
  [4;35;1mSQL (0.000356)[0m   [0mSHOW CREATE TABLE `profiles`[0m
  [4;36;1mSQL (0.000450)[0m   [0;1mSHOW CREATE TABLE `users`[0m
  [4;35;1mSQL (0.020795)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000325)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000090)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.031505)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.026522)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.007421)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007704)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000448)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000193)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.005721)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000453)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000222)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.040361)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.008892)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000438)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000374)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000502)[0m   [0mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
  [4;36;1mSQL (0.000852)[0m   [0;1mSHOW FIELDS FROM active_users[0m
  [4;35;1mSQL (0.000869)[0m   [0mSHOW FIELDS FROM pending_users[0m
  [4;36;1mSQL (0.000347)[0m   [0;1mSHOW CREATE VIEW active_users[0m
  [4;35;1mSQL (0.000331)[0m   [0mSHOW CREATE VIEW pending_users[0m
  [4;36;1mSQL (0.017033)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000451)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000157)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.032514)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.023954)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007331)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007616)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000425)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000200)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.004858)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000420)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000185)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.010497)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.009292)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000461)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000431)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.001424)[0m   [0;1mSHOW TRIGGERS[0m
  [4;35;1mSQL (0.019294)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000482)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000161)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.041998)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.026923)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.007424)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007150)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000409)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000190)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.005190)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000366)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000179)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.005531)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.009755)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000498)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000373)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000193)[0m   [0mSELECT DATABASE() as db[0m
  [4;36;1mSQL (0.004318)[0m   [0;1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;35;1mSQL (0.000465)[0m   [0mSHOW CREATE PROCEDURE fix_user_state[0m
  [4;36;1mSQL (0.000343)[0m   [0;1mSHOW CREATE FUNCTION hello[0m
  [4;35;1mSQL (0.015709)[0m   [0mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000522)[0m   [0;1mCREATE DATABASE `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000347)[0m   [0mUSE db_structure_ext_test[0m
  [4;36;1mSQL (0.038264)[0m   [0;1mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.025272)[0m   [0mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.010135)[0m   [0;1mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.007904)[0m   [0mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.000442)[0m   [0;1mDROP TABLE IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.000189)[0m   [0mDROP VIEW IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.005423)[0m   [0;1mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;35;1mSQL (0.000378)[0m   [0mDROP TABLE IF EXISTS active_users;[0m
  [4;36;1mSQL (0.000249)[0m   [0;1mDROP VIEW IF EXISTS active_users;[0m
  [4;35;1mSQL (0.005639)[0m   [0mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;36;1mSQL (0.008674)[0m   [0;1mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;35;1mSQL (0.000427)[0m   [0mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;36;1mSQL (0.000442)[0m   [0;1mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;35;1mSQL (0.000509)[0m   [0mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
  [4;36;1mSQL (0.000407)[0m   [0;1mSHOW CREATE TABLE `profiles`[0m
  [4;35;1mSQL (0.000489)[0m   [0mSHOW CREATE TABLE `users`[0m
  [4;36;1mSQL (0.000521)[0m   [0;1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
  [4;35;1mSQL (0.001122)[0m   [0mSHOW FIELDS FROM active_users[0m
  [4;36;1mSQL (0.000909)[0m   [0;1mSHOW FIELDS FROM pending_users[0m
  [4;35;1mSQL (0.000394)[0m   [0mSHOW CREATE VIEW active_users[0m
  [4;36;1mSQL (0.000376)[0m   [0;1mSHOW CREATE VIEW pending_users[0m
  [4;35;1mSQL (0.001069)[0m   [0mSHOW TRIGGERS[0m
  [4;36;1mSQL (0.000162)[0m   [0;1mSELECT DATABASE() as db[0m
  [4;35;1mSQL (0.004198)[0m   [0mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
  [4;36;1mSQL (0.000400)[0m   [0;1mSHOW CREATE PROCEDURE fix_user_state[0m
  [4;35;1mSQL (0.000366)[0m   [0mSHOW CREATE FUNCTION hello[0m
  [4;36;1mSQL (0.018007)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000453)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000145)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.068240)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.025844)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.008041)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007665)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000528)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000200)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005462)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000477)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000198)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005283)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.015907)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000500)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000530)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.018045)[0m   [0;1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
  [4;35;1mSQL (0.000364)[0m   [0mCREATE DATABASE `db_structure_ext_test`[0m
  [4;36;1mSQL (0.000133)[0m   [0;1mUSE db_structure_ext_test[0m
  [4;35;1mSQL (0.035749)[0m   [0mCREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;36;1mSQL (0.027516)[0m   [0;1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
  [4;35;1mSQL (0.007786)[0m   [0mCREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;36;1mSQL (0.007124)[0m   [0;1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
  [4;35;1mSQL (0.000230)[0m   [0mDROP TABLE IF EXISTS pending_users;[0m
  [4;36;1mSQL (0.000118)[0m   [0;1mDROP VIEW IF EXISTS pending_users;[0m
  [4;35;1mSQL (0.005519)[0m   [0mCREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');[0m
  [4;36;1mSQL (0.000332)[0m   [0;1mDROP TABLE IF EXISTS active_users;[0m
  [4;35;1mSQL (0.000114)[0m   [0mDROP VIEW IF EXISTS active_users;[0m
  [4;36;1mSQL (0.005034)[0m   [0;1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
  [4;35;1mSQL (0.008716)[0m   [0mCREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;[0m
  [4;36;1mSQL (0.000194)[0m   [0;1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
  [4;35;1mSQL (0.000116)[0m   [0mCREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');[0m
  [4;36;1mSQL (0.000205)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.000450)[0m   [0mSHOW TRIGGERS[0m
  [4;36;1mSQL (0.001753)[0m   [0;1mSELECT ROUTINE_NAME FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:52:21.824300 #24407] DEBUG -- :   [1m[36mSQL (17.1ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:52:21.825054 #24407] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:52:21.825503 #24407] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:52:21.875128 #24407] DEBUG -- :   [1m[35mSQL (49.1ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:52:21.900676 #24407] DEBUG -- :   [1m[36mSQL (25.1ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:52:21.908557 #24407] DEBUG -- :   [1m[35mSQL (7.5ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:52:21.916648 #24407] DEBUG -- :   [1m[36mSQL (7.7ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:52:21.917399 #24407] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:52:21.917899 #24407] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:52:21.923413 #24407] DEBUG -- :   [1m[35mSQL (5.2ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:52:21.924236 #24407] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:52:21.924868 #24407] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:52:21.936143 #24407] DEBUG -- :   [1m[36mSQL (11.0ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:52:21.945037 #24407] DEBUG -- :   [1m[35mSQL (8.7ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:52:21.945389 #24407] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:52:21.945741 #24407] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:52:21.947477 #24407] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'BASE TABLE'[0m
D, [2011-10-11T21:52:21.948258 #24407] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SHOW CREATE TABLE `profiles`
D, [2011-10-11T21:52:21.948882 #24407] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mSHOW CREATE TABLE `users`[0m
D, [2011-10-11T21:52:21.951498 #24407] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW FULL TABLES WHERE Table_type = 'VIEW'
D, [2011-10-11T21:52:21.952690 #24407] DEBUG -- :   [1m[36mSQL (0.8ms)[0m  [1mSHOW FIELDS FROM active_users[0m
D, [2011-10-11T21:52:21.953673 #24407] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW FIELDS FROM pending_users
D, [2011-10-11T21:52:21.954390 #24407] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mSHOW CREATE VIEW active_users[0m
D, [2011-10-11T21:52:21.954974 #24407] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE VIEW pending_users
D, [2011-10-11T21:52:21.957981 #24407] DEBUG -- :   [1m[36mSQL (1.1ms)[0m  [1mSHOW TRIGGERS[0m
D, [2011-10-11T21:52:21.958909 #24407] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  SELECT DATABASE() as db
D, [2011-10-11T21:52:21.962898 #24407] DEBUG -- :   [1m[36mSQL (3.8ms)[0m  [1mSELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
D, [2011-10-11T21:52:21.963589 #24407] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW CREATE PROCEDURE fix_user_state
D, [2011-10-11T21:52:21.964082 #24407] DEBUG -- :   [1m[36mSQL (0.4ms)[0m  [1mSHOW CREATE FUNCTION hello[0m
D, [2011-10-11T21:52:21.965403 #24407] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  SHOW FULL TABLES WHERE Table_type = 'BASE TABLE'
D, [2011-10-11T21:52:21.965799 #24407] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE TABLE `profiles`[0m
D, [2011-10-11T21:52:21.966045 #24407] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE TABLE `users`
D, [2011-10-11T21:52:21.966410 #24407] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW FULL TABLES WHERE Table_type = 'VIEW'[0m
D, [2011-10-11T21:52:21.966979 #24407] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW FIELDS FROM active_users
D, [2011-10-11T21:52:21.967465 #24407] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mSHOW FIELDS FROM pending_users[0m
D, [2011-10-11T21:52:21.967842 #24407] DEBUG -- :   [1m[35mSQL (0.2ms)[0m  SHOW CREATE VIEW active_users
D, [2011-10-11T21:52:21.968164 #24407] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mSHOW CREATE VIEW pending_users[0m
D, [2011-10-11T21:52:21.968743 #24407] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:52:21.969029 #24407] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSELECT DATABASE() as db[0m
D, [2011-10-11T21:52:21.970519 #24407] DEBUG -- :   [1m[35mSQL (1.3ms)[0m  SELECT ROUTINE_TYPE as type, ROUTINE_NAME as name FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'
D, [2011-10-11T21:52:21.970802 #24407] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mSHOW CREATE PROCEDURE fix_user_state[0m
D, [2011-10-11T21:52:21.971052 #24407] DEBUG -- :   [1m[35mSQL (0.1ms)[0m  SHOW CREATE FUNCTION hello
D, [2011-10-11T21:52:22.002427 #24407] DEBUG -- :   [1m[36mSQL (14.3ms)[0m  [1mDROP DATABASE IF EXISTS `db_structure_ext_test`[0m
D, [2011-10-11T21:52:22.003043 #24407] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  CREATE DATABASE `db_structure_ext_test` DEFAULT CHARACTER SET `utf8`
D, [2011-10-11T21:52:22.003412 #24407] DEBUG -- :   [1m[36mSQL (0.1ms)[0m  [1mUSE db_structure_ext_test[0m
D, [2011-10-11T21:52:22.036683 #24407] DEBUG -- :   [1m[35mSQL (32.2ms)[0m  CREATE TABLE `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `email` varchar(127) DEFAULT NULL,
 `state` varchar(127) DEFAULT NULL,
 `created_at` datetime DEFAULT NULL,
 `updated_at` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
 KEY `index_review_users_on_email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
D, [2011-10-11T21:52:22.067111 #24407] DEBUG -- :   [1m[36mSQL (29.9ms)[0m  [1mCREATE TABLE `profiles` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `user_id` int(11) DEFAULT NULL,
 `address1` varchar(127) DEFAULT NULL,
 `address2` varchar(127) DEFAULT NULL,
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;[0m
D, [2011-10-11T21:52:22.075931 #24407] DEBUG -- :   [1m[35mSQL (8.4ms)[0m  CREATE TABLE pending_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;
D, [2011-10-11T21:52:22.083905 #24407] DEBUG -- :   [1m[36mSQL (7.5ms)[0m  [1mCREATE TABLE active_users (
 `id` int(11),
 `email` varchar(127)
) ENGINE=MyISAM;[0m
D, [2011-10-11T21:52:22.084715 #24407] DEBUG -- :   [1m[35mSQL (0.5ms)[0m  DROP TABLE IF EXISTS pending_users;
D, [2011-10-11T21:52:22.085200 #24407] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mDROP VIEW IF EXISTS pending_users;[0m
D, [2011-10-11T21:52:22.090426 #24407] DEBUG -- :   [1m[35mSQL (4.9ms)[0m  CREATE VIEW `pending_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'pending');
D, [2011-10-11T21:52:22.091199 #24407] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mDROP TABLE IF EXISTS active_users;[0m
D, [2011-10-11T21:52:22.091682 #24407] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  DROP VIEW IF EXISTS active_users;
D, [2011-10-11T21:52:22.097361 #24407] DEBUG -- :   [1m[36mSQL (5.4ms)[0m  [1mCREATE VIEW `active_users` AS select `users`.`id` AS `id`,`users`.`email` AS `email` from `users` where (`users`.`state` = 'active');[0m
D, [2011-10-11T21:52:22.107472 #24407] DEBUG -- :   [1m[35mSQL (9.8ms)[0m  CREATE TRIGGER update_user_state_on_insert BEFORE INSERT ON users FOR EACH ROW begin
 set NEW.state = 'pending';
end;
D, [2011-10-11T21:52:22.108222 #24407] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mCREATE PROCEDURE `fix_user_state`()
BEGIN
 UPDATE users SET users.state = 'pending'
 WHERE state IS NULL;
END;[0m
D, [2011-10-11T21:52:22.108879 #24407] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  CREATE FUNCTION `hello`(s char(20)) RETURNS char(50) CHARSET utf8
 DETERMINISTIC
RETURN CONCAT('Hello, ',s,'!');
D, [2011-10-11T21:52:22.109713 #24407] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mSHOW TABLES[0m
D, [2011-10-11T21:52:22.111353 #24407] DEBUG -- :   [1m[35mSQL (1.3ms)[0m  SHOW TRIGGERS
D, [2011-10-11T21:52:22.116097 #24407] DEBUG -- :   [1m[36mSQL (4.3ms)[0m  [1mSELECT ROUTINE_NAME FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA='db_structure_ext_test'[0m
